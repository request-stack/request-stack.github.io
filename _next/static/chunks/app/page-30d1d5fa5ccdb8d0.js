(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{70822:function(e,t,s){Promise.resolve().then(s.bind(s,68667))},68667:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return e8}});var a=s(2070),l=s(30814),r=s(94985),n=s(71057),i=s(62856),d=s(87660);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.m6)((0,i.W)(t))}let c=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=l.forwardRef((e,t)=>{let{className:s,variant:l,size:n,asChild:i=!1,...d}=e,m=i?r.g7:"button";return(0,a.jsx)(m,{className:o(c({variant:l,size:n,className:s})),ref:t,...d})});m.displayName="Button";var x=s(28649);let u=l.forwardRef((e,t)=>{let{className:s,children:l,...r}=e;return(0,a.jsxs)(x.fC,{ref:t,className:o("relative overflow-hidden",s),...r,children:[(0,a.jsx)(x.l_,{className:"h-full w-full rounded-[inherit]",children:l}),(0,a.jsx)(h,{}),(0,a.jsx)(x.Ns,{})]})});u.displayName=x.fC.displayName;let h=l.forwardRef((e,t)=>{let{className:s,orientation:l="vertical",...r}=e;return(0,a.jsx)(x.gb,{ref:t,orientation:l,className:o("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:(0,a.jsx)(x.q4,{className:"relative flex-1 rounded-full bg-border"})})});h.displayName=x.gb.displayName;let f=l.forwardRef((e,t)=>{let{className:s,type:l,...r}=e;return(0,a.jsx)("input",{type:l,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});f.displayName="Input";var p=s(99402),g=s(41344),b=s(77980),j=s(30746),N=s(7084),v=s(10525),w=s(6399),y=s(64341),k=s(26204),C=s(70593),Z=s(28694),S=s(62484),z=s(73066),R=s(21274),D=s(15627),T=s(95917);let P=R.fC,L=R.xz;R.ZA,R.Uv,R.Tr,R.Ee;let I=l.forwardRef((e,t)=>{let{className:s,inset:l,children:r,...n}=e;return(0,a.jsxs)(R.fF,{ref:t,className:o("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",l&&"pl-8",s),...n,children:[r,(0,a.jsx)(D.Z,{className:"ml-auto h-4 w-4"})]})});I.displayName=R.fF.displayName;let A=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(R.tu,{ref:t,className:o("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})});A.displayName=R.tu.displayName;let _=l.forwardRef((e,t)=>{let{className:s,sideOffset:l=4,...r}=e;return(0,a.jsx)(R.Uv,{children:(0,a.jsx)(R.VY,{ref:t,sideOffset:l,className:o("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})})});_.displayName=R.VY.displayName;let V=l.forwardRef((e,t)=>{let{className:s,inset:l,...r}=e;return(0,a.jsx)(R.ck,{ref:t,className:o("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l&&"pl-8",s),...r})});V.displayName=R.ck.displayName;let E=l.forwardRef((e,t)=>{let{className:s,children:l,checked:r,...n}=e;return(0,a.jsxs)(R.oC,{ref:t,className:o("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(R.wU,{children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})})}),l]})});E.displayName=R.oC.displayName;let O=l.forwardRef((e,t)=>{let{className:s,children:l,...r}=e;return(0,a.jsxs)(R.Rk,{ref:t,className:o("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(R.wU,{children:(0,a.jsx)(T.Z,{className:"h-2 w-2 fill-current"})})}),l]})});O.displayName=R.Rk.displayName;let M=l.forwardRef((e,t)=>{let{className:s,inset:l,...r}=e;return(0,a.jsx)(R.__,{ref:t,className:o("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",s),...r})});M.displayName=R.__.displayName;let F=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(R.Z0,{ref:t,className:o("-mx-1 my-1 h-px bg-muted",s),...l})});function U(e){let{onNewChat:t,onSelectChat:s,currentChatId:r}=e,[n,i]=(0,l.useState)(!1),[d,o]=(0,l.useState)(null),[c,x]=(0,l.useState)(""),[h,R]=(0,l.useState)([{id:"1",title:"React 组件开发",lastMessage:"如何创建一个可复用的按钮组件？",timestamp:new Date(Date.now()-18e5)},{id:"2",title:"TypeScript 类型定义",lastMessage:"接口和类型别名的区别是什么？",timestamp:new Date(Date.now()-72e5)},{id:"3",title:"Next.js 路由配置",lastMessage:"动态路由的最佳实践",timestamp:new Date(Date.now()-864e5)},{id:"4",title:"Tailwind CSS 样式",lastMessage:"响应式设计的实现方法",timestamp:new Date(Date.now()-1728e5)},{id:"5",title:"数据库设计",lastMessage:"PostgreSQL 索引优化策略",timestamp:new Date(Date.now()-2592e5)}]),[D,T]=(0,l.useState)(!1),I=e=>{let t=new Date,s=t.getTime()-e.getTime(),a=Math.floor(s/6e4),l=Math.floor(s/36e5);return a<60?"".concat(a,"分钟前"):l<24?"".concat(l,"小时前"):"".concat(Math.floor(s/864e5),"天前")},A=(e,s)=>{s.stopPropagation(),R(t=>t.filter(t=>t.id!==e)),r===e&&t()},E=(e,t,s)=>{s.stopPropagation(),o(e),x(t)},O=e=>{c.trim()&&R(t=>t.map(t=>t.id===e?{...t,title:c.trim()}:t)),o(null),x("")},M=()=>{o(null),x("")};return h.find(e=>e.id===r),(0,a.jsxs)("div",{className:"relative flex",children:[(0,a.jsxs)("div",{className:"h-full bg-white dark:bg-slate-900 border-r border-slate-200 dark:border-slate-700 flex flex-col transition-all duration-300 ".concat(n?"w-0 overflow-hidden":"w-80"),children:[(0,a.jsx)("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:(0,a.jsxs)(m,{onClick:t,className:"w-full justify-start gap-3 h-11 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-sm",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5"}),"新建会话"]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 pb-2",children:(0,a.jsx)("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 mb-3",children:"历史会话"})}),(0,a.jsx)(u,{className:"flex-1 px-2",children:(0,a.jsx)("div",{className:"space-y-1 pb-4",children:h.map(e=>(0,a.jsx)("div",{className:"group relative rounded-lg p-3 cursor-pointer transition-all duration-200 hover:bg-slate-50 dark:hover:bg-slate-800 ".concat(r===e.id?"bg-blue-50 dark:bg-blue-950/50 border border-blue-200 dark:border-blue-800":""),onClick:()=>s(e.id),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-slate-400 to-slate-500 flex items-center justify-center mt-0.5",children:(0,a.jsx)(g.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-1",children:d===e.id?(0,a.jsxs)("div",{className:"flex items-center gap-1 flex-1",children:[(0,a.jsx)(f,{value:c,onChange:e=>x(e.target.value),className:"h-6 text-sm px-2",onKeyDown:t=>{"Enter"===t.key?O(e.id):"Escape"===t.key&&M()},autoFocus:!0,onClick:e=>e.stopPropagation()}),(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:t=>{t.stopPropagation(),O(e.id)},children:(0,a.jsx)(b.Z,{className:"w-3 h-3 text-green-600"})}),(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:e=>{e.stopPropagation(),M()},children:(0,a.jsx)(j.Z,{className:"w-3 h-3 text-red-600"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate",children:e.title}),(0,a.jsxs)(P,{children:[(0,a.jsx)(L,{asChild:!0,children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity h-6 w-6 p-0 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(N.Z,{className:"w-4 h-4"})})}),(0,a.jsxs)(_,{align:"end",className:"w-32",children:[(0,a.jsxs)(V,{onClick:t=>E(e.id,e.title,t),children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"修改名称"]}),(0,a.jsxs)(V,{onClick:t=>A(e.id,t),className:"text-red-600 dark:text-red-400",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 mr-2"}),"删除"]})]})]})]})}),d!==e.id&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate mb-1",children:e.lastMessage}),(0,a.jsx)("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:I(e.timestamp)})]})]})]})},e.id))})})]}),(0,a.jsx)("div",{className:"border-t border-slate-200 dark:border-slate-700 p-4",children:(0,a.jsxs)(P,{open:D,onOpenChange:T,children:[(0,a.jsx)(L,{asChild:!0,children:(0,a.jsxs)(m,{variant:"ghost",className:"w-full justify-between h-12 px-3 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:(0,a.jsx)(y.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"登录用户7069"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"user@example.com"})]})]}),(0,a.jsx)(k.Z,{className:"w-4 h-4 text-slate-400 transition-transform duration-200 ".concat(D?"rotate-180":"")})]})}),(0,a.jsxs)(_,{align:"end",side:"top",className:"w-64 mb-2",sideOffset:8,children:[(0,a.jsxs)("div",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"登录用户7069"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"user@example.com"})]}),(0,a.jsxs)(V,{className:"gap-3 py-2.5",children:[(0,a.jsx)(C.Z,{className:"w-4 h-4"}),"设置"]}),(0,a.jsx)(F,{}),(0,a.jsxs)(V,{className:"gap-3 py-2.5 text-red-600 dark:text-red-400",children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4"}),"退出登录"]})]})]})})]}),(0,a.jsxs)("div",{className:"absolute left-0 top-4 z-10 flex items-center gap-2",style:{left:n?"16px":"320px"},children:[(0,a.jsx)(m,{variant:"ghost",size:"icon",onClick:()=>i(!n),className:"w-8 h-8 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 transition-all duration-300",children:n?(0,a.jsx)(S.Z,{className:"w-4 h-4"}):(0,a.jsx)(z.Z,{className:"w-4 h-4"})}),n&&(0,a.jsx)(m,{onClick:t,size:"icon",className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 animate-in slide-in-from-left-2",children:(0,a.jsx)(p.Z,{className:"w-5 h-5"})})]})]})}F.displayName=R.Z0.displayName;var Y=s(22673),$=s(21283),G=s(58151),K=s(80297);let H=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),B=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(K.f,{ref:t,className:o(H(),s),...l})});B.displayName=K.f.displayName;var q=s(25898);let W=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsxs)(q.fC,{ref:t,className:o("relative flex w-full touch-none select-none items-center",s),...l,children:[(0,a.jsx)(q.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(q.e6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(q.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});W.displayName=q.fC.displayName;let J=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("textarea",{className:o("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});J.displayName="Textarea";var Q=s(99134),X=s(28901);let ee=Q.fC;Q.ZA;let et=Q.B4,es=l.forwardRef((e,t)=>{let{className:s,children:l,...r}=e;return(0,a.jsxs)(Q.xz,{ref:t,className:o("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[l,(0,a.jsx)(Q.JO,{asChild:!0,children:(0,a.jsx)(X.Z,{className:"h-4 w-4 opacity-50"})})]})});es.displayName=Q.xz.displayName;let ea=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(Q.u_,{ref:t,className:o("flex cursor-default items-center justify-center py-1",s),...l,children:(0,a.jsx)(k.Z,{className:"h-4 w-4"})})});ea.displayName=Q.u_.displayName;let el=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(Q.$G,{ref:t,className:o("flex cursor-default items-center justify-center py-1",s),...l,children:(0,a.jsx)(X.Z,{className:"h-4 w-4"})})});el.displayName=Q.$G.displayName;let er=l.forwardRef((e,t)=>{let{className:s,children:l,position:r="popper",...n}=e;return(0,a.jsx)(Q.h_,{children:(0,a.jsxs)(Q.VY,{ref:t,className:o("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...n,children:[(0,a.jsx)(ea,{}),(0,a.jsx)(Q.l_,{className:o("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(el,{})]})})});er.displayName=Q.VY.displayName;let en=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(Q.__,{ref:t,className:o("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...l})});en.displayName=Q.__.displayName;let ei=l.forwardRef((e,t)=>{let{className:s,children:l,...r}=e;return(0,a.jsxs)(Q.ck,{ref:t,className:o("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(Q.wU,{children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(Q.eT,{children:l})]})});ei.displayName=Q.ck.displayName;let ed=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(Q.Z0,{ref:t,className:o("-mx-1 my-1 h-px bg-muted",s),...l})});ed.displayName=Q.Z0.displayName;var eo=s(22472);let ec=eo.fC,em=eo.xz;eo.x8;let ex=eo.h_,eu=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eo.aV,{className:o("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l,ref:t})});eu.displayName=eo.aV.displayName;let eh=(0,n.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ef=l.forwardRef((e,t)=>{let{side:s="right",className:l,children:r,...n}=e;return(0,a.jsxs)(ex,{children:[(0,a.jsx)(eu,{}),(0,a.jsxs)(eo.VY,{ref:t,className:o(eh({side:s}),l),...n,children:[r,(0,a.jsxs)(eo.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});ef.displayName=eo.VY.displayName;let ep=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:o("flex flex-col space-y-2 text-center sm:text-left",t),...s})};ep.displayName="SheetHeader";let eg=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eo.Dx,{ref:t,className:o("text-lg font-semibold text-foreground",s),...l})});eg.displayName=eo.Dx.displayName;let eb=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eo.dk,{ref:t,className:o("text-sm text-muted-foreground",s),...l})});eb.displayName=eo.dk.displayName;var ej=s(4852),eN=s(81648),ev=s(64314);function ew(e){let{settings:t,onSettingsChange:s}=e,[r,n]=(0,l.useState)(t||{model:"gpt-4",temperature:.7,topP:.9,maxTokens:2e3,systemPrompt:"你是一个有用的AI助手，请友好、准确地回答用户的问题。"}),i=(e,t)=>{let a={...r,[e]:t};n(a),s(a)};return(0,a.jsxs)(ec,{children:[(0,a.jsx)(em,{asChild:!0,children:(0,a.jsx)(m,{variant:"ghost",size:"icon",className:"rounded-full",children:(0,a.jsx)(C.Z,{className:"w-5 h-5"})})}),(0,a.jsxs)(ef,{className:"w-[400px] sm:w-[540px]",children:[(0,a.jsxs)(ep,{children:[(0,a.jsxs)(eg,{className:"flex items-center gap-2",children:[(0,a.jsx)(C.Z,{className:"w-5 h-5"}),"模型设置"]}),(0,a.jsx)(eb,{children:"调整AI模型参数以获得最佳对话体验"})]}),(0,a.jsxs)("div",{className:"space-y-6 py-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(B,{className:"flex items-center gap-2",children:[(0,a.jsx)(ej.Z,{className:"w-4 h-4"}),"AI 模型"]}),(0,a.jsxs)(ee,{value:r.model,onValueChange:e=>i("model",e),children:[(0,a.jsx)(es,{children:(0,a.jsx)(et,{placeholder:"选择模型"})}),(0,a.jsx)(er,{children:[{value:"gpt-4",label:"GPT-4",description:"最强大的通用模型"},{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo",description:"快速且经济"},{value:"claude-3",label:"Claude 3",description:"擅长分析和创作"},{value:"deepseek-chat",label:"DeepSeek Chat",description:"中文优化模型"}].map(e=>(0,a.jsx)(ei,{value:e.value,children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium",children:e.label}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.description})]})},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(B,{className:"flex items-center gap-2",children:[(0,a.jsx)(eN.Z,{className:"w-4 h-4"}),"创造性 (Temperature): ",r.temperature]}),(0,a.jsx)(W,{value:[r.temperature],onValueChange:e=>{let[t]=e;return i("temperature",t)},max:2,min:0,step:.1,className:"w-full"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"保守 (0)"}),(0,a.jsx)("span",{children:"平衡 (1)"}),(0,a.jsx)("span",{children:"创新 (2)"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(B,{className:"flex items-center gap-2",children:[(0,a.jsx)(ev.Z,{className:"w-4 h-4"}),"核采样 (Top-p): ",r.topP]}),(0,a.jsx)(W,{value:[r.topP],onValueChange:e=>{let[t]=e;return i("topP",t)},max:1,min:0,step:.05,className:"w-full"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"精确 (0)"}),(0,a.jsx)("span",{children:"多样 (1)"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(B,{children:["最大输出长度: ",r.maxTokens," tokens"]}),(0,a.jsx)(W,{value:[r.maxTokens],onValueChange:e=>{let[t]=e;return i("maxTokens",t)},max:4e3,min:100,step:100,className:"w-full"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"简短 (100)"}),(0,a.jsx)("span",{children:"详细 (4000)"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B,{children:"系统角色设定"}),(0,a.jsx)(J,{value:r.systemPrompt,onChange:e=>i("systemPrompt",e.target.value),placeholder:"例如：你是一名专业的翻译官，请将用户输入的内容翻译成英文...",className:"min-h-[100px] resize-none"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"设定AI的角色和行为方式，影响整个对话的风格"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B,{children:"快速预设"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{name:"通用助手",prompt:"你是一个有用的AI助手，请友好、准确地回答用户的问题。"},{name:"专业翻译",prompt:"你是一名专业翻译官，请将用户输入的内容准确翻译，保持原意和语境。"},{name:"代码专家",prompt:"你是一名资深程序员，擅长多种编程语言，请提供高质量的代码解决方案。"},{name:"写作助手",prompt:"你是一名专业写作助手，擅长各种文体创作，请帮助用户改进文章质量。"}].map(e=>(0,a.jsx)(m,{variant:"outline",size:"sm",onClick:()=>i("systemPrompt",e.prompt),className:"text-xs h-8",children:e.name},e.name))})]})]})]})]})}let ey=eo.fC,ek=eo.xz,eC=eo.h_;eo.x8;let eZ=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eo.aV,{ref:t,className:o("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l})});eZ.displayName=eo.aV.displayName;let eS=l.forwardRef((e,t)=>{let{className:s,children:l,...r}=e;return(0,a.jsxs)(eC,{children:[(0,a.jsx)(eZ,{}),(0,a.jsxs)(eo.VY,{ref:t,className:o("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[l,(0,a.jsxs)(eo.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eS.displayName=eo.VY.displayName;let ez=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:o("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};ez.displayName="DialogHeader";let eR=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:o("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};eR.displayName="DialogFooter";let eD=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eo.Dx,{ref:t,className:o("text-lg font-semibold leading-none tracking-tight",s),...l})});eD.displayName=eo.Dx.displayName;let eT=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eo.dk,{ref:t,className:o("text-sm text-muted-foreground",s),...l})});eT.displayName=eo.dk.displayName;var eP=s(47219),eL=s(24104),eI=s(62919);function eA(e){let{messages:t}=e,[s,r]=(0,l.useState)(!1),[n,i]=(0,l.useState)(!1),d=async()=>{let e={messages:t.map(e=>({role:e.role,content:e.content,timestamp:e.timestamp.toISOString()}))},s=btoa(JSON.stringify(e)).slice(0,12),a="".concat(window.location.origin,"/share/").concat(s);try{await navigator.clipboard.writeText(a),i(!0),setTimeout(()=>i(!1),2e3)}catch(e){console.error("Failed to copy share link:",e)}};return(0,a.jsxs)(ey,{open:s,onOpenChange:r,children:[(0,a.jsx)(ek,{asChild:!0,children:(0,a.jsx)(m,{variant:"ghost",size:"icon",className:"rounded-full",children:(0,a.jsx)(eP.Z,{className:"w-5 h-5"})})}),(0,a.jsxs)(eS,{className:"sm:max-w-md",children:[(0,a.jsxs)(ez,{children:[(0,a.jsxs)(eD,{className:"flex items-center gap-2",children:[(0,a.jsx)(eP.Z,{className:"w-5 h-5"}),"导出对话"]}),(0,a.jsx)(eT,{children:"选择导出格式或生成分享链接"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"导出文件"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(m,{variant:"outline",onClick:()=>{let e=t.map(e=>{let t="user"===e.role?"**用户**":"**AI助手**",s=e.timestamp.toLocaleString("zh-CN");return"".concat(t," (").concat(s,")\n\n").concat(e.content,"\n\n---\n")}).join("\n"),s=new Blob([e],{type:"text/markdown"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download="chat-export-".concat(new Date().toISOString().split("T")[0],".md"),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)},className:"flex items-center gap-2",children:[(0,a.jsx)(eL.Z,{className:"w-4 h-4"}),"Markdown"]}),(0,a.jsxs)(m,{variant:"outline",onClick:()=>{let e=t.map(e=>{let t="user"===e.role?"用户":"AI助手",s=e.timestamp.toLocaleString("zh-CN");return"[".concat(s,"] ").concat(t,": ").concat(e.content)}).join("\n\n"),s=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download="chat-export-".concat(new Date().toISOString().split("T")[0],".txt"),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)},className:"flex items-center gap-2",children:[(0,a.jsx)(eL.Z,{className:"w-4 h-4"}),"纯文本"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"分享链接"}),(0,a.jsx)(m,{variant:"outline",onClick:d,className:"w-full flex items-center gap-2",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{className:"w-4 h-4"}),"已复制链接"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eI.Z,{className:"w-4 h-4"}),"生成分享链接"]})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"生成只读分享链接，其他人可以查看此对话"})]})]})]})]})}function e_(e){let{messages:t,settings:s,onSettingsChange:l}=e,{theme:r,setTheme:n}=(0,G.F)();return(0,a.jsx)("header",{className:"border-b border-slate-200 dark:border-slate-700 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600",children:(0,a.jsx)(g.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AI Chat Interface"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Powered by advanced language models"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eA,{messages:t}),(0,a.jsx)(ew,{settings:s,onSettingsChange:l}),(0,a.jsxs)(m,{variant:"ghost",size:"icon",onClick:()=>n("dark"===r?"light":"dark"),className:"rounded-full",children:[(0,a.jsx)(Y.Z,{className:"w-5 h-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)($.Z,{className:"absolute w-5 h-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})]})]})})}var eV=s(57644),eE=s(40749);function eO(e){let{onSendMessage:t,isLoading:s}=e,[r,n]=(0,l.useState)(""),i=e=>{s||t(e)},d=[{icon:(0,a.jsx)(eV.Z,{className:"w-4 h-4"}),text:"AI不会讲英语",color:"from-orange-400 to-orange-500"},{icon:(0,a.jsx)(ej.Z,{className:"w-4 h-4"}),text:"了解人工智能的必读书籍",color:"from-blue-400 to-blue-500"},{icon:(0,a.jsx)(ev.Z,{className:"w-4 h-4"}),text:"揭开蒙牛山神秘面纱",color:"from-green-400 to-green-500"}];return(0,a.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center px-4 py-8 bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:(0,a.jsxs)("div",{className:"w-full max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"AI Chat Interface"}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:"开始与AI助手的智能对话"})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),r.trim()&&!s&&(t(r),n(""))},className:"relative",children:(0,a.jsxs)("div",{className:"relative bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-lg hover:shadow-xl transition-all duration-200",children:[(0,a.jsx)(J,{value:r,onChange:e=>n(e.target.value),placeholder:"尽管问...",className:"min-h-[120px] resize-none border-0 bg-transparent text-base px-6 py-4 focus:ring-0 focus:outline-none",disabled:s}),(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-3 border-t border-slate-100 dark:border-slate-700",children:[(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)(m,{variant:"ghost",size:"sm",className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-1"}),"深度思考"]})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"GPT-4"}),(0,a.jsx)(m,{type:"submit",disabled:!r.trim()||s,size:"icon",className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 transition-all duration-200",children:(0,a.jsx)(eE.Z,{className:"w-4 h-4"})})]})]})]})})}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-center gap-3 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 rounded-full border border-slate-200 dark:border-slate-700 shadow-sm",children:[(0,a.jsx)(eV.Z,{className:"w-4 h-4 text-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Kimi K2 发布并开源，模型即 Agent"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 rounded-full border border-slate-200 dark:border-slate-700 shadow-sm",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full bg-orange-400"}),(0,a.jsx)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"申请加入 Kimi"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 mb-4",children:"最新研究："}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-3",children:d.map((e,t)=>(0,a.jsxs)(m,{variant:"outline",onClick:()=>i(e.text),disabled:s,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-all duration-200",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full bg-gradient-to-r ".concat(e.color," flex items-center justify-center text-white"),children:e.icon}),(0,a.jsx)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:e.text})]},t))})]}),(0,a.jsx)("div",{className:"text-center mt-12 text-xs text-slate-400 dark:text-slate-500",children:"内容由AI生成，请仔细甄别"})]})})}var eM=s(90144),eF=s(66574),eU=s(48886),eY=s(38281),e$=s(72469),eG=s(71008),eK=s(83977);function eH(e){let{children:t,className:s,...r}=e,{theme:n}=(0,G.F)(),[i,d]=l.useState(!1),o=/language-(\w+)/.exec(s||""),c=o?o[1]:"",x=async()=>{try{await navigator.clipboard.writeText(String(t).replace(/\n$/,"")),d(!0),setTimeout(()=>d(!1),2e3)}catch(e){console.error("Failed to copy code:",e)}};return o?(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:x,className:"absolute top-2 right-2 h-8 px-2 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:i?(0,a.jsx)(b.Z,{className:"w-4 h-4"}):(0,a.jsx)(eK.Z,{className:"w-4 h-4"})}),(0,a.jsx)(e$.Z,{style:"dark"===n?eG.vk:eG.Yn,language:c,PreTag:"div",className:"!mt-0 !mb-4 rounded-lg",showLineNumbers:!0,wrapLines:!0,wrapLongLines:!0,children:String(t).replace(/\n$/,"")})]}):(0,a.jsx)("code",{className:"bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded text-sm font-mono",...r,children:t})}function eB(e){let{content:t}=e;return(0,a.jsx)("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:(0,a.jsx)(eM.UG,{remarkPlugins:[eF.Z,eU.Z],rehypePlugins:[eY.Z],components:{code:eH,table:e=>{let{children:t,...s}=e;return(0,a.jsx)("div",{className:"overflow-x-auto my-4",children:(0,a.jsx)("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-600",...s,children:t})})},th:e=>{let{children:t,...s}=e;return(0,a.jsx)("th",{className:"border border-slate-300 dark:border-slate-600 px-4 py-2 bg-slate-50 dark:bg-slate-800 font-semibold text-left",...s,children:t})},td:e=>{let{children:t,...s}=e;return(0,a.jsx)("td",{className:"border border-slate-300 dark:border-slate-600 px-4 py-2",...s,children:t})},blockquote:e=>{let{children:t,...s}=e;return(0,a.jsx)("blockquote",{className:"border-l-4 border-blue-500 dark:border-blue-400 pl-4 py-2 bg-blue-50 dark:bg-blue-950/30 my-4 italic",...s,children:t})},h1:e=>{let{children:t,...s}=e;return(0,a.jsx)("h1",{className:"text-2xl font-bold mt-6 mb-4 text-slate-900 dark:text-slate-100",...s,children:t})},h2:e=>{let{children:t,...s}=e;return(0,a.jsx)("h2",{className:"text-xl font-semibold mt-5 mb-3 text-slate-900 dark:text-slate-100",...s,children:t})},h3:e=>{let{children:t,...s}=e;return(0,a.jsx)("h3",{className:"text-lg font-medium mt-4 mb-2 text-slate-900 dark:text-slate-100",...s,children:t})},p:e=>{let{children:t,...s}=e;return(0,a.jsx)("p",{className:"mb-4 leading-7 text-slate-700 dark:text-slate-300",...s,children:t})},ul:e=>{let{children:t,...s}=e;return(0,a.jsx)("ul",{className:"list-disc list-inside mb-4 space-y-1 text-slate-700 dark:text-slate-300",...s,children:t})},ol:e=>{let{children:t,...s}=e;return(0,a.jsx)("ol",{className:"list-decimal list-inside mb-4 space-y-1 text-slate-700 dark:text-slate-300",...s,children:t})}},children:t})})}function eq(e){let{isOpen:t,onOpenChange:s,initialContent:r,onSave:n}=e,[i,d]=(0,l.useState)(r);return(0,a.jsx)(ey,{open:t,onOpenChange:s,children:(0,a.jsxs)(eS,{className:"sm:max-w-[600px]",children:[(0,a.jsxs)(ez,{children:[(0,a.jsxs)(eD,{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5"}),"编辑消息"]}),(0,a.jsx)(eT,{children:"修改消息内容，保存后会重新生成后续对话"})]}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)(J,{value:i,onChange:e=>d(e.target.value),className:"min-h-[120px] resize-none",placeholder:"输入消息内容..."})}),(0,a.jsxs)(eR,{children:[(0,a.jsx)(m,{variant:"outline",onClick:()=>{d(r),s(!1)},children:"取消"}),(0,a.jsx)(m,{onClick:()=>{i.trim()!==r&&n(i.trim()),s(!1)},disabled:!i.trim(),children:"保存修改"})]})]})})}var eW=s(63454),eJ=s(73101);function eQ(e){let{message:t,isStreaming:s=!1,onRegenerate:r,onDelete:n,onEdit:i}=e,[d,o]=(0,l.useState)(!1),[c,x]=(0,l.useState)(!1),u="user"===t.role,h=async()=>{try{await navigator.clipboard.writeText(t.content),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){console.error("Failed to copy text:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex gap-4 group ".concat(u?"flex-row-reverse":""),children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ".concat(u?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gradient-to-br from-blue-500 to-purple-600"),children:u?(0,a.jsx)(y.Z,{className:"w-5 h-5 text-white"}):(0,a.jsx)(eW.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 ".concat(u?"flex justify-end":""," overflow-y-scroll h-[calc(100vh-218px)]"),children:[(0,a.jsx)("div",{className:"max-w-[100%] md:max-w-[100%] ".concat(u?"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-2xl rounded-tr-md px-4 py-3":"bg-white dark:bg-slate-800 rounded-2xl rounded-tl-md border border-slate-200 dark:border-slate-700 px-4 py-3 shadow-sm"),children:u?(0,a.jsx)("div",{className:"prose prose-invert max-w-none",children:(0,a.jsx)("p",{className:"text-white m-0 whitespace-pre-wrap break-words",children:t.content})}):(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eB,{content:t.content}),s&&(0,a.jsx)("div",{className:"inline-block w-2 h-5 bg-slate-400 dark:bg-slate-500 animate-pulse ml-1"})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-2 opacity-0 group-hover:opacity-100 transition-opacity ".concat(u?"justify-end":""),children:[(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:h,className:"h-8 px-2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:d?(0,a.jsx)(b.Z,{className:"w-4 h-4"}):(0,a.jsx)(eK.Z,{className:"w-4 h-4"})}),!u&&(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>{r(t.id)},className:"h-8 px-2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",disabled:s,children:(0,a.jsx)(eJ.Z,{className:"w-4 h-4"})}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>{x(!0)},className:"h-8 px-2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:(0,a.jsx)(v.Z,{className:"w-4 h-4"})}),(0,a.jsxs)(P,{children:[(0,a.jsx)(L,{asChild:!0,children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"h-8 px-2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:(0,a.jsx)(N.Z,{className:"w-4 h-4"})})}),(0,a.jsx)(_,{align:"end",children:(0,a.jsxs)(V,{onClick:()=>{n(t.id)},className:"text-red-600 dark:text-red-400",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 mr-2"}),"Delete"]})})]})]}),(0,a.jsx)("div",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1 ".concat(u?"text-right":""),children:t.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),(0,a.jsx)(eq,{isOpen:c,onOpenChange:x,initialContent:t.content,onSave:e=>{i(t.id,e)}})]})}function eX(){return(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:(0,a.jsx)(eW.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("div",{className:"max-w-[75%] bg-white dark:bg-slate-800 rounded-2xl rounded-tl-md border border-slate-200 dark:border-slate-700 px-4 py-3 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-bounce [animation-delay:0.1s]"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-bounce [animation-delay:0.2s]"})]})})})]})}var e0=s(12585);function e4(e){let{error:t,onRetry:s}=e;return(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center",children:(0,a.jsx)(e0.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("div",{className:"max-w-[75%] bg-red-50 dark:bg-red-950/50 border border-red-200 dark:border-red-800 rounded-2xl rounded-tl-md px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-red-900 dark:text-red-100 font-medium mb-1",children:"Something went wrong"}),(0,a.jsx)("p",{className:"text-red-700 dark:text-red-300 text-sm",children:t})]}),(0,a.jsxs)(m,{variant:"outline",size:"sm",onClick:s,className:"flex-shrink-0 border-red-300 dark:border-red-700 text-red-700 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50",children:[(0,a.jsx)(eJ.Z,{className:"w-4 h-4 mr-1"}),"Retry"]})]})})})]})}function e2(e){let{messages:t,isLoading:s,isStreaming:l,error:r,onRetry:n,onRegenerate:i,onDelete:d,onEdit:o}=e;return(0,a.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[0===t.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:(0,a.jsx)(g.Z,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-slate-900 dark:text-slate-100 mb-2",children:"Start a conversation"}),(0,a.jsx)("p",{className:"text-slate-500 dark:text-slate-400 max-w-md mx-auto",children:"Ask me anything! I can help with coding, writing, analysis, and much more."})]}),t.map(e=>(0,a.jsx)(eQ,{message:e,isStreaming:l&&"assistant"===e.role,onRegenerate:i,onDelete:d,onEdit:o},e.id)),s&&!l&&(0,a.jsx)(eX,{}),r&&(0,a.jsx)(e4,{error:r,onRetry:()=>{let e=t.slice().reverse().find(e=>"user"===e.role);e&&n(e.id)}})]})})}var e1=s(91563);function e5(e){let{onSendMessage:t,onStopGeneration:s,isLoading:r,isStreaming:n}=e,[i,d]=(0,l.useState)(""),o=(0,l.useRef)(null),c=(0,l.useCallback)(e=>{e.preventDefault(),i.trim()&&!r&&(t(i),d(""),o.current&&(o.current.style.height="auto"))},[i,r,t]),x=(0,l.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),c(e))},[c]),u=(0,l.useCallback)(e=>{d(e.target.value);let t=e.target;t.style.height="auto",t.style.height=Math.min(t.scrollHeight,200)+"px"},[]),h=(0,l.useCallback)(e=>{let t=e.clipboardData.getData("text");t.length>1e3&&console.log("Pasting long text:",t.length,"characters")},[]);return(0,a.jsx)("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[(0,a.jsxs)("form",{onSubmit:c,className:"flex gap-3 items-end",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(J,{ref:o,value:i,onChange:u,onKeyDown:x,onPaste:h,placeholder:"输入消息... (Enter 发送, Shift+Enter 换行)",className:"min-h-[44px] max-h-[200px] resize-none pr-12 bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-all duration-200",disabled:r}),i.length>500&&(0,a.jsx)("div",{className:"absolute bottom-2 right-12 text-xs text-slate-400 dark:text-slate-500",children:i.length})]}),n?(0,a.jsx)(m,{type:"button",onClick:s,variant:"destructive",size:"icon",className:"h-11 w-11 rounded-full flex-shrink-0",children:(0,a.jsx)(e1.Z,{className:"w-5 h-5"})}):(0,a.jsx)(m,{type:"submit",disabled:!i.trim()||r,size:"icon",className:"h-11 w-11 rounded-full flex-shrink-0 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 transition-all duration-200",children:(0,a.jsx)(eE.Z,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"flex justify-center mt-2",children:(0,a.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"支持 Markdown 格式 • Shift+Enter 换行 • Enter 发送"})})]})})}function e3(){let[e,t]=(0,l.useState)("1"),[s,r]=(0,l.useState)(!0),[n,i]=(0,l.useState)({model:"gpt-4",temperature:.7,topP:.9,maxTokens:2e3,systemPrompt:"你是一个有用的AI助手，请友好、准确地回答用户的问题。"}),[d,o]=(0,l.useState)({messages:[],isLoading:!1,isStreaming:!1,error:null}),c=(0,l.useRef)(null),m=(0,l.useRef)(null),x=(0,l.useCallback)(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[]);(0,l.useEffect)(()=>{x()},[d.messages,x]);let u=(0,l.useCallback)(e=>{let t={...e,id:Date.now().toString(),timestamp:new Date};return o(e=>({...e,messages:[...e.messages,t]})),t.id},[]),h=(0,l.useCallback)((e,t)=>{o(s=>({...s,messages:s.messages.map(s=>s.id===e?{...s,...t}:s)}))},[]),f=(0,l.useCallback)(e=>{o(t=>({...t,messages:t.messages.filter(t=>t.id!==e)}))},[]),p=(0,l.useCallback)((e,t)=>{o(s=>{let a=s.messages.findIndex(t=>t.id===e);if(-1===a)return s;let l=[...s.messages];return(l[a]={...l[a],content:t},"user"===l[a].role)?{...s,messages:l.slice(0,a+1)}:{...s,messages:l}})},[]),g=(0,l.useCallback)(async(e,t)=>{o(e=>({...e,isStreaming:!0}));let s=t.split(" "),a="";for(let t=0;t<s.length;t++){var l;if(null===(l=c.current)||void 0===l?void 0:l.signal.aborted)break;h(e,{content:a+=(t>0?" ":"")+s[t]}),await new Promise(e=>setTimeout(e,50+100*Math.random()))}o(e=>({...e,isStreaming:!1}))},[h]),b=(0,l.useCallback)(async e=>{if(!e.trim())return;s&&r(!1),u({role:"user",content:e.trim()});let t=u({role:"assistant",content:""});o(e=>({...e,isLoading:!0,error:null}));try{c.current=new AbortController;let s="这是一个模拟的AI响应。我理解您的问题：**".concat(e,"**\n\n**当前模型设置：**\n- 模型: ").concat(n.model,"\n- 创造性: ").concat(n.temperature,"\n- 系统角色: ").concat(n.systemPrompt.slice(0,50),"...\n\n## 代码示例\n\n以下是一个简单的 React 组件：\n\n```javascript\nfunction HelloWorld() {\n  const [count, setCount] = useState(0);\n  \n  return (\n    <div>\n      <h1>Hello World!</h1>\n      <p>计数: {count}</p>\n      <button onClick={() => setCount(count + 1)}>\n        点击增加\n      </button>\n    </div>\n  );\n}\n```\n\n## 数学公式\n\n这里是一个数学公式示例：\n\n$$E = mc^2$$\n\n## 表格\n\n| 特性 | 描述 | 状态 |\n|------|------|------|\n| 流式输出 | 实时显示响应 | ✅ |\n| Markdown | 支持富文本 | ✅ |\n| 代码高亮 | 语法高亮显示 | ✅ |\n\n这个响应演示了各种 Markdown 功能，包括代码块、数学公式和表格。");await g(t,s)}catch(e){o(t=>({...t,error:e instanceof Error?e.message:"An error occurred"}))}finally{o(e=>({...e,isLoading:!1}))}},[u,g,n]),j=(0,l.useCallback)(()=>{c.current&&(c.current.abort(),o(e=>({...e,isLoading:!1,isStreaming:!1})))},[]),N=(0,l.useCallback)(e=>{let t=d.messages.find(t=>t.id===e);(null==t?void 0:t.role)==="user"&&b(t.content)},[d.messages,b]),v=(0,l.useCallback)(e=>{let t=d.messages.findIndex(t=>t.id===e);if(t>0){let s=d.messages[t-1];(null==s?void 0:s.role)==="user"&&(f(e),b(s.content))}},[d.messages,f,b]),w=(0,l.useCallback)(()=>{let e=Date.now().toString();t(e),r(!0),o({messages:[],isLoading:!1,isStreaming:!1,error:null})},[]),y=(0,l.useCallback)(e=>{t(e),r(!1),o({messages:[],isLoading:!1,isStreaming:!1,error:null})},[]);return(0,a.jsxs)("div",{className:"flex h-screen",children:[(0,a.jsx)(U,{onNewChat:w,onSelectChat:y,currentChatId:e}),(0,a.jsx)("div",{className:"flex-1 flex flex-col",children:s&&0===d.messages.length?(0,a.jsx)(eO,{onSendMessage:b,isLoading:d.isLoading}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e_,{messages:d.messages,settings:n,onSettingsChange:i}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,a.jsx)(e2,{messages:d.messages,isLoading:d.isLoading,isStreaming:d.isStreaming,error:d.error,onRetry:N,onRegenerate:v,onDelete:f,onEdit:p}),(0,a.jsx)("div",{ref:m})]}),(0,a.jsx)(e5,{onSendMessage:b,onStopGeneration:j,isLoading:d.isLoading,isStreaming:d.isStreaming})]})})]})}function e8(){return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:(0,a.jsx)(e3,{})})}}},function(e){e.O(0,[678,677,392,610,744],function(){return e(e.s=70822)}),_N_E=e.O()}]);